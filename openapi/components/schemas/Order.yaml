type: object
required:
  - service_type
  - service_level
  - from
  - to
properties:
  service_type:
    type: string
    description: |
      Loại hình dịch vụ của đối tác

      ***Lưu ý:*** Vui lòng kiểm tra với người đại diện Sales của Ninja Van để biết bạn dùng Service Type nào.
    enum:
      - Parcel
      - Document
      - Return
      - Marketplace
      - Corporate
      - Corporate Document
      - Bulky
      - International
  service_level:
    type: string
    description: |
      Dịch vụ vận chuyển mong muốn

      ***Lưu ý:*** Vui lòng kiểm tra với người đại diện Sales của Ninja Van để biết bạn dùng Service Level nào.
    enum:
      - Standard
      - Express
      - Sameday
      - Nextday
  requested_tracking_number:
    type: string
    pattern: '^([a-zA-Z0-9]+[-])*[a-zA-Z0-9]+$'
    minLength: 9
    description: Mã đơn hàng mong muốn
  reference:
    type: object
    description: |
      Thông tin tham chiếu, được bao gồm trong webhooks để đối chiếu với đơn hàng trên hệ thống đối tác, và có thể dùng làm tham số cho các GET API của Ninja Van.
    properties:
      merchant_order_number:
        type: string
        description: Định danh đơn hàng trên hệ thống đối tác
        maxLength: 255
  from:
    type: object
    description: |
      Đối tượng `from` được dùng như:
      
      * Thông tin liên hệ để thông báo người gửi khi có cập nhật đơn hàng
      
      * Thông tin địa chỉ gửi hàng in trên nhãn bưu kiện
    allOf:
      - $ref: './Address.yaml'
    
  to:
    type: object
    description: |
      Đối tượng `to` được dùng như nơi giao hàng và:
      
      * Thông tin liên hệ để thông báo người nhận khi có cập nhật đơn hàng
      
      * Thông tin địa chỉ giao hàng in trên nhãn bưu kiện
    allOf:
      - $ref: './Address.yaml'
    
  parcel_job:
    type: object
    description: >-
      Chi tiết thông tin nhận hàng và giao hàng.


      Nếu địa chỉ nhận hàng không được gửi lên, hệ thống sẽ dựa vào địa chỉ nhận hàng mặc định được cài đặt trong pickup reservation của đối tác.
    required:
      - is_pickup_required
      - delivery_timeslot
      - delivery_start_date
    properties:
      is_pickup_required: 
        type: boolean
        description: |
          Cho biết có cần pickup tại kho của đối tác hay không.
        default: false
      pickup_address:
        type: object
        description: |
          Địa chỉ nhận hàng
        allOf:
          - $ref: './Address.yaml'
      pickup_address_id:    
        type: string
        pattern: '^([a-zA-Z0-9]+[-])*[a-zA-Z0-9]+$'
        description: |
          Mã địa chỉ nhận hàng đã được lưu trong hệ thống Ninja Van
        minLength: 1  
        maxLength: 64
      pickup_service_type:
        type: string
        enum:
          - Scheduled
          - On-Demand
        default:
          Scheduled
        description: |
          Dịch vụ lấy hàng
          
          ***Lưu ý:*** Vui lòng kiểm tra với người đại diện Sales của Ninja Van để biết bạn dùng Pickup Service Type nào.
      pickup_service_level:
        type: string
        enum:
          - Standard
          - Premium
        default:
          Standard
        description: |
          ***Lưu ý:*** Không áp dụng cho các đơn hàng có dịch vụ pickup `On-Demand`.
      pickup_date:
        type: string
        pattern: '^([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))$'
        description: |
          Ngày nhận hàng từ đối tác, định dạng `yyyy-MM-dd`.
      pickup_timeslot:
        type: object
        description: |
          Khung thời gian nhận hàng

          ***Lưu ý:*** Các khung giờ hợp lệ
    
          * "09:00" - "12:00"
          
          * "09:00" - "18:00"
          
          * "09:00" - "22:00"
          
          * "12:00" - "15:00"
          
          * "15:00" - "18:00"
          
          * "18:00" - "22:00"
        allOf:
          - $ref: './Timeslot.yaml'
      pickup_approx_volume:
        type: string
        enum:
          - Full-Van Load
          - Half-Van Load
          - Larger than Van Load
          - Less than 10 Parcels
          - Less than 3 Parcels
          - Trolley Required
        default:
          Less than 3 Parcels
      pickup_instructions:
        type: string
        description: |
          Hướng dẫn cho tài xế đến lấy hàng
      delivery_start_date:
        type: string
        pattern: '^([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))$'
        description: |
          Ngày bắt đầu của khoảng thời gian giao hàng, định dạng `yyyy-MM-dd`.
          
          Ví dụ: Đối với các đơn đặt hàng tiêu chuẩn mất 3 ngày, nếu
          `delivery_start_date` là vào `2017-02-10`, Ninja Van sẽ
          cố gắng giao hàng trong khoảng thời gian từ `2017-02-10` đến `2017-02-12`.

          Hệ thống sẽ tự động điều chỉnh thành ngày khả dụng gần nhất khi ngày được truyền vào không hợp lệ (cuối tuần hoặc ngày lễ). Hãy kiểm tra ngày `delivery_start_date` trong kết quả trả về.
      delivery_timeslot:
        type: object
        description: |
          Khung thời gian giao hàng

          ***Lưu ý:*** Các khung giờ hợp lệ
    
          * "09:00" - "12:00"
          
          * "09:00" - "18:00"
          
          * "09:00" - "22:00"
          
          * "12:00" - "15:00"
          
          * "15:00" - "18:00"
          
          * "18:00" - "22:00"
        allOf:
          - $ref: './Timeslot.yaml'
      delivery_instructions:
        type: string
        description: |
          Hướng dẫn cho tài xế đi giao hàng
      items:
        type: array
        items:
          type: object
      allow_weekend_delivery:
        type: boolean
        default: true
        description: |
          Cho biết có nên giao hàng vào cuối tuần hay không.
      cash_on_delivery:
        type: number
        format: double
        minimum: 0
        description: |
          Số tiền COD. Nếu bằng 0 thì không thu tiền COD.
      insured_value:
        type: number
        format: double
        minimum: 0
        description: |
          Giá trị bảo hiểm mong muốn của kiện hàng
      dimensions:
        type: object
        description: |
          Kích thước của kiện hàng, được dùng để tính phí vận chuyển.
          
          
          ***Lưu ý:*** Vui lòng kiểm tra với người đại diện Sales của Ninja Van để xem bạn nên gửi thuộc tính kích thước nào.
example:
  service_type: Parcel
  service_level: Standard
  requested_tracking_number: 1234-56789
  reference:
    merchant_order_number: SHIP-1234-56789
  from:
    name: Nguyễn Văn Quang
    phone_number: '+84702222222'
    email: quang.nguyen@gmail.com
    address:
      address1: 120 Nguyễn Thị Minh Khai
      ward: Phường 6
      district: Quận 3
      city: Hồ Chí Minh      
      country: VN
  to:
    name: Trần Thị Như Thảo
    phone_number: '+84702333333'
    email: thao.tran@gmail.com
    address:
      address1: 66 Nguyễn Thái Học
      address2: Bảo tàng Mỹ thuật Việt Nam
      ward: Điện Bàn
      district: Ba Đình
      city: Hà Nội
      country: VN
  parcel_job:
    is_pickup_required: true
    pickup_service_type: Scheduled
    pickup_service_level: Standard
    pickup_date: '2021-09-01'
    pickup_timeslot:
      start_time: '09:00'
      end_time: '22:00'
      timezone: Asia/Ho_Chi_Minh
    pickup_instructions: Vui lòng gọi trước khi đến pickup!
    delivery_start_date: '2021-09-03'
    delivery_timeslot: 
      start_time: '09:00'
      end_time: '22:00'
      timezone: Asia/Ho_Chi_Minh
    delivery_instructions: Hàng không đổi trả
